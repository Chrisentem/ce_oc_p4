{% extends 'base.html.twig' %}
{% form_theme form 'bootstrap_4_layout.html.twig' %}
{% form_theme form _self %}
{# form_errors.html.twig #}
{% block form_errors %}
    {% spaceless %}
        {% if errors|length > 0 %}
            <div  id="form-errors">
                <ul>
                    {% for error in errors %}
                        <li><i class="fas fa-exclamation-triangle"></i> {{ error.message }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    {% endspaceless %}
{% endblock form_errors %}
{% block title %}
    Achat étape 3 - {{ parent() }}
{% endblock %}
        {% block breadcrumb %}
            {% include 'default/_breadcrumb.html.twig' %}
        {% endblock %}
{% block body %}
    <div id="content">
        <div class="row">
            <div class="col-lg-12">
                <h3>Récapitulatif</h3>
                <div style="overflow-x:auto;">
                <table class="table table-dark">
                    <thead>
                    <tr>
                        <th scope="col">Firstname</th>
                        <th scope="col">Lastname</th>
                        <th scope="col">Birthday</th>
                        <th scope="col">Price</th>
                        <th scope="col">Reduced*</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for ticket in purchase.tickets %}
                        <tr>
                            <td>{{ ticket.firstname }}</td>
                            <td>{{ ticket.lastname }}</td>
                            <td>{{ ticket.birthdate|date("m/d/Y") }}</td>
                            <td>{{ ticket.price }} &euro;</td>
                            <td>{% if ticket.discounted == true and ticket.price > 0 %}
                                    Oui
                                {% elseif ticket.price > 0 %}
                                    Non
                                {% else %}
                                    --
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="alert alert-warning" role="alert">
                    <ul>
                        <li> N'oubliez pas votre carte d'identité ou votre passport le jour de la visite, afin de vérifier les informations fournies. </li>
                        <li> *Si vous bénéficiez du tarif réduit, merci d'apporter votre justificatif. </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div id="content" class="col-lg-12">
                <h3>Confirmation</h3>
                <p>Veuillez nous indiquer à quelle adresse email envoyer le billet électronique</p>
                <div class="well">
                    {{ form_start(form) }}
                    {{ form_row(form.email) }}
                    {% autoescape false %}
                        {{ form_row(form.agree, { 'label': 'J\'ai lu et j\'accèpte les conditions générales de vente' }) }}
                    {% endautoescape %}
                    {{ form_rest(form)}}
                    <div id="form-nav" class="form-button">
                        <a href="{{ path('order_step_2') }}" class="btn btn-primary"><i class="fas fa-angle-double-left"></i> Retour</a>
                        <button type="submit" class="btn btn-primary">Confirmer la commande <i class="fas fa-angle-double-right"></i></button>
                    </div>
                    {{ form_end(form)}}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
